---
title: php面试题整理-mysql数据库层的优化
date: 2017-10-10 21:38:13
tags:
	- php面试
---
### 数据表数据类型优化 ###
		
- tinyint、smallint、bigint  考虑空间、范围问题
		
- char、varchar 字符串长度是否固定
		
- enum 特定、固定的分类可以使用enum来存储效率更快

- ip地址存储 整型 ip2long
<!--more-->
### 索引优化 ###

##### 创建原则 #####

- 非越多越好，合适的字段创建合适的索引
			
- 复合索引前缀原则

##### 注意事项 #####

- 前缀原则

- like %

- 全表扫描优化

- or条件索引失效情况

- 字符串索引失效 尽量加引号

##### sql语句优化 #####

- 查询过程 使用limit 尽量不使用* 
		
- 长难句 复杂变简单 切分查询 分解关联查询
		
- 特定类型 count(*) 关联查询 子查询（不建议） group by distinct limit

##### 存储引擎优化 #####

尽量使用innodb

##### 表结构设计优化 #####

分区：
			
1、特定策略对数据表进行物理拆分
			
2、对用户透明
			
3、partition by
		
分库分表： 水平拆分 | 垂直拆分

##### 数据库架构优化 #####

- 主从复制
		
- 读写分离
		
- 双主热备
		
- 负载均衡（lvs的三种模式 mycat的中间件）